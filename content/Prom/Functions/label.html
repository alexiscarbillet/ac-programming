<!DOCTYPE html>
<html lang="en">
  <head>
    

    <script async custom-element=""
        src="https://cdn.ampproject.org/v0/-0.1.js">
</script>


    <meta charset="utf-8">
    <title>Prometheus Label Functions</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Some functions about labels in prometheus">
    <meta name="keywords" content="alexis carbillet, carbillet, prom, prometheus, Prometheus Label Functions, label">
    <meta name="author" content="Alexis Carbillet ">
 
    <!-- Control appearance when share by social media -->
    <meta property="og:title" content="Some functions about labels in prometheus" />
    <meta property="og:description" content="Some functions about labels in prometheus" />
    <meta property='og:url' content="https://www.ac-programming.com/content/Prom/Functions/label.html" />
    <meta property="og:type" content="website" />

    <!-- Bootstrap core CSS -->
    <link href="../../../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

	<!-- Icon -->
	<link rel="shortcut icon" href="../../img/logo/logo.png" />
	
    <!-- Custom fonts for this template -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>

    <!-- Custom styles for this template -->
    <link href="../../../css/structure.css" rel="stylesheet">

	<!-- Choice of languages -->
	<link rel="alternate" hreflang="x-default" href="https://www.ac-programming.com/" />


  </head>

  <body id="page-top">
    <amp-auto-ads type="adsense"
        data-ad-client="ca-pub-9364684337389377">
</amp-auto-ads>






    <!-- Navigation --> 
    <nav class="navbar navbar-expand-lg fixed-top" id="mainNav">
      <div class="container">
		<img src="../../../img/logo/logo.png" width="5%" style="margin-right: 2%;" alt="logo website">
		<button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <i class="fa fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav text-uppercase ml-auto">
			<li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#article">Article</a>
            </li>
			<li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#python">Examples</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#contact">Contact</a>
            </li>
			<li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="../../../index.html#db">Main</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>



    <!-- Header -->
    <header class="masthead">
	  <div class="container">		
		  
	  </div>
    </header>
	
<!-- ======================== ARTICLE SECTION ============================ -->

	<section id="article">
      <div class="container">
        <div class="row">
		  <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12 text-center">
			<h2 class="section-heading text-uppercase">Prometheus Label Functions</h2>
		  </div>
		  <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12 text-left">
		  <p>In Prometheus, labels are key-value pairs associated with time series data. They allow you to add metadata and context to your metrics, enabling more granular and specific querying. Prometheus provides various label functions to manipulate and filter time series data based on these labels. Here are the main label functions in Prometheus:</p>
		  <p>1. <B>label_replace</B>: This function allows you to replace or modify labels of a time series. It takes four arguments: the input vector, the target label name, a regular expression to match the source label value, and a replacement string.</p>
		  <p>2. <B>label_join</B>: With this function, you can concatenate label values into a new label. It takes two arguments: the input vector and a delimiter string to join the labels.</p>
		  <p>3. <B>label_drop</B>: This function removes specified labels from the input vector, effectively reducing the dimensionality of the data.</p>
		  <p>4. <B>label_keep</B>: The "label_keep" function filters out all labels from the input vector except the specified ones. It helps to focus on specific labels while discarding the rest.</p>
		  <p>5. <B>label_match</B>: This function selects time series that match a given regular expression pattern for a specific label. It takes two arguments: the input vector and the regular expression pattern.</p>
		  <p>6. <B>label_replace_all</B>: Similar to "label_replace", this function replaces or modifies multiple labels of a time series in one step. It takes three arguments: the input vector, a set of pairs of regular expressions and replacement strings, and an optional parameter to control the behavior of replacing multiple labels.</p>
		  <p>7. <B>label_map</B>: This function maps source label values to target label values based on a provided mapping. It takes three arguments: the input vector, a mapping of source to target labels, and an optional default value for unmatched source labels.</p>
		  <p>8. <B>label_set</B>: With this function, you can add or modify label values of a time series. It takes three arguments: the input vector, the label name to set or modify, and the label value to assign.</p>
      <p>These label functions provide powerful capabilities for manipulating and filtering time series data based on their labels in Prometheus. They allow you to modify, transform, or select specific time series based on the metadata associated with them, enabling more targeted and flexible querying and analysis.</p>
		  </div>
		</div>
      </div>
    </section>

<!-- ======================================================================= -->

<!-- ======================== PYTHON SECTION ============================ -->

	<section class="bg-light" id="python">
      <div class="container">
        <div class="row">
		  <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12 text-center">
			<h2 class="section-heading text-uppercase">Examples</h2>
		  </div>
		  <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12 text-left">
      <p>These examples demonstrate how each label function can be used in PromQL to manipulate and transform time series data based on their labels:</p>
			<p>1. <B>label_replace</B>:
      <pre><code>label_replace(my_metric{job="job1"}, "new_label", "$1", "source_label", "(.*)")</code></pre>
      This example replaces the value of the "new_label" with the value of "source_label" for the "my_metric" time series. The regular expression "(.*)" captures the value of "source_label" and assigns it to "new_label".
      </p>
      <p>2. <B>label_join</B>:
      <pre><code>label_join(my_metric{job="job1"}, "new_label", ",", "label1", "label2")</code></pre>
      This example joins the values of "label1" and "label2" with a comma (",") as the delimiter and assigns the result to "new_label" for the "my_metric" time series.
      </p>
      <p>3. <B>label_drop</B>:
      <pre><code>label_drop(my_metric{job="job1"}, "label1", "label2")</code></pre>
      This example removes the "label1" and "label2" labels from the "my_metric" time series, reducing its dimensionality.
      </p>
      <p>4. <B>label_keep</B>:
      <pre><code>label_keep(my_metric{job="job1"}, "label1", "label2")</code></pre>
      This example keeps only the "label1" and "label2" labels for the "my_metric" time series and discards all other labels.
      </p>
      <p>5. <B>label_match</B>:
      <pre><code>label_match(my_metric{job="job1"}, "label_name", "regex_pattern")</code></pre>
      This example selects time series from the "my_metric" metric that have a "label_name" matching the specified "regex_pattern".
      </p>
      <p>6. <B>label_replace_all</B>:
      <pre><code>label_replace_all(my_metric{job="job1"}, {
  source_label1=~"regex_pattern1" => "replacement1",
  source_label2=~"regex_pattern2" => "replacement2"
})</code></pre>
      This example replaces multiple labels ("source_label1" and "source_label2") with their corresponding replacement values for the "my_metric" time series, based on the provided regular expression patterns.
      </p>
      <p>7. <B>label_map</B>:
      <pre><code>label_map(my_metric{job="job1"}, { "source_label1" => "target_label1", "source_label2" => "target_label2" }, "default_value")</code></pre>
      This example maps the values of "source_label1" and "source_label2" to their respective target labels ("target_label1" and "target_label2") for the "my_metric" time series. If a source label value is not present in the mapping, it uses the specified default value.
      </p>
      <p>8. label_set:
      <pre><code>label_set(my_metric{job="job1"}, "new_label", "new_value")</code></pre>
      This example adds or modifies the label new_label to have the value new_value for the my_metric time series.
      </p>
		  </div>
		</div>
      </div>
    </section>

<!-- ======================================================================= -->

<!-- ========================== CONTACT SECTION ============================== -->

<iframe id="contact" src="../../../contact.html"  frameborder="0" scrolling="no" style="border: none; width: 100%; height: 140vh; max-height: 800px;"></iframe>

<!-- ======================================================================= -->


<!-- ======================= FOOTER SECTION ================================ -->
    <footer>
      <div class="container">
        <div class="row">
			<div class="col-xs-3 col-md-3 col-sm-3 col-lg-3">
        <iframe src="../../../copyright.html" frameborder="0" style="padding: 0%; max-height: 25px;"></iframe>
			</div>
			<div class="col-xs-6 col-md-6 col-sm-6 col-lg-6 text-center">
			</div>
			<div class="col-xs-1 col-md-1 col-sm-1 col-lg-1"></div>
			<div class="col-xs-2 col-md-2 col-sm-2 col-lg-2">
			<a href="../../../index.html"><span class="copyright" style="margin-right: 2%;">Blog</span></a>
			</div>
		</div>
		<div id="particles-js" style="height:50px;"></div>
      </div>
    </footer>

<!-- ======================================================================= -->

<!-- ======================== JAVASCRIPT SECTION =========================== -->



    <!-- Bootstrap core JavaScript -->
    <script src="../../../vendor/jquery/jquery.min.js"></script>
	<script src="../../../vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="../../../vendor/jquery-easing/jquery.easing.min.js"></script>
	
    <!-- Custom scripts for this template -->
    <script src="../../../js/structure.js"></script>
	
	<!-- Particles part -->
	<script src="../../../js/particles.js"></script>
	<script src="../../../js/app.js"></script>
	
    <!-- Activate the bootstrap tooltip, must be after jQuery load -->
    <script>
    $(function () {
      $('[data-toggle="tooltip"]').tooltip();
    })
    </script>
	

<!-- ======================================================================= -->
  </body>

</html>
